:root{
  --font-sans: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-display: 'Orbitron', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  /* richer variation across the red family for the Star Catches chart */
  --red1: rgba(255, 170, 110, .88);
  --red2: rgba(255, 120, 90, .88);
  --red3: rgba(255, 70, 70, .88);
  --red4: rgba(230, 30, 70, .88);
  --red5: rgba(150, 0, 40, .92);

  --bg:#0b1b3a;
  --bg2:#0a2a5a;
  --panel:#07193a;
  --panel2:#08224d;
  --ink:#e9f1ff;
  --muted:#a9bddc;
  --accent:#ffc400;

  --common:#7dd3fc;
  --rare:#60a5fa;
  --epic:#a78bfa;
  --legendary:#facc15;
}

*{box-sizing:border-box}
html,body{height:100%; font-family: var(--font-sans);}

body{
  margin:0;
  font-family: var(--font-sans);
  color:var(--ink);
  background-image: linear-gradient(180deg, var(--bg) 0%, #8ab6ff 100%);
  /* force a single gradient "tile" (no repeating artifacts) */
  background-repeat:no-repeat;
  background-size:cover;
  background-attachment:fixed;
}

.topbar{
  /* single, smooth gradient (no 3-band look) */
  background:linear-gradient(90deg, #001a66 0%, #000e3a 100%);
  background-repeat:no-repeat;
  border-bottom:1px solid rgba(255,255,255,.08);
  overflow:visible;

  padding: 4px 12px;}

/* Top tabs (Dashboard / Record) */
.top-tabs{
  display:flex;
  justify-content:center;
  gap:10px;
  padding: 10px 24px 0;
}
.tab-btn{
  appearance:none;
  border:1px solid rgba(255,255,255,.16);
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  color:rgba(255,255,255,.86);
  border-radius:999px;
  padding:10px 18px;
  font-family: inherit;
  font-size:12px;
  letter-spacing:1.2px;
  text-transform:uppercase;
  cursor:pointer;
  box-shadow:0 10px 24px rgba(0,0,0,.18);

  font-weight: 700;
}

.tab-btn:hover{ background:linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06)); }
.tab-btn.active{
  border-color:rgba(255,196,0,.55);
  background:linear-gradient(180deg, rgba(255,196,0,.22), rgba(255,196,0,.10));
  color:var(--accent);
}

.tab-view{ display:none; }
.tab-view.active{ display:block; }
.topbar-inner{
  /* banner content ~40% thinner */
  max-width: 100%;
  margin:0 auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
  /* thinner header */
  /* extra right padding so title never collides with the logo */
  padding: 12px 24px;
  min-height: 64px;
}
.brand{ text-align:left; }
.brand-title{
  font-weight:900;
  letter-spacing:2px;
  font-size:44px;
  color:var(--accent);
  line-height:1;

  font-family: var(--font-display);
}

.brand-sub{
  font-size:11px;
  letter-spacing:1.2px;
  color:rgba(255,255,255,.75);
  margin-top:0;

  font-family: var(--font-display);
}

.brand-mark{
  font-size:38px;
  opacity:.9;
  filter:drop-shadow(0 6px 10px rgba(0,0,0,.35));
}

.layout{
  max-width: 100%;
  margin:0 auto;
  display:grid;
  grid-template-columns: 230px 1fr;
  gap:18px;
  padding: 12px 24px;
}

.sidebar{
  background:linear-gradient(180deg, rgba(4,12,34,.88), rgba(6,22,60,.88));
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding: 12px 24px;
  box-shadow:0 18px 40px rgba(0,0,0,.22);
}
.sidebar-section{margin-bottom:18px}
.sidebar-title{
  font-size:12px;
  color:rgba(255,255,255,.8);
  letter-spacing:1.1px;
  text-transform:uppercase;
  margin:6px 0 10px;
}

.btn-list{display:flex; flex-direction:column; gap:6px}
.loc-btn{
  width:100%;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.08);
  color:var(--ink);
  padding: 12px 24px;
  font-size:13px;
  text-align:left;
  cursor:pointer;
}
.loc-btn:hover{background:rgba(255,255,255,.12)}
.loc-btn.active{
  background:rgba(255,196,0,.18);
  border-color:rgba(255,196,0,.4);
}

.rarity-legend{display:grid; grid-template-columns:1fr 1fr; gap:8px}
.legend-item{display:flex; align-items:center; gap:8px; font-size:10px; color:rgba(255,255,255,.85)}

/* Dashboard rarity slicer behavior */
.legend-item.slicer{
  cursor:pointer;
  user-select:none;
  padding:6px 8px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.04);
}
.legend-item.slicer:hover{background:rgba(255,255,255,.08)}
.legend-item.slicer.active{
  background:rgba(255,196,0,.14);
  border-color:rgba(255,196,0,.35);
}
.swatch{width:14px; height:14px; border-radius:4px; display:inline-block}
.swatch.common{background:var(--common)}
.swatch.rare{background:var(--rare)}
.swatch.epic{background:var(--epic)}
.swatch.legendary{background:var(--legendary)}

.progress{display:flex; flex-direction:column; align-items:center}
.donut{
  width:160px;
  height:160px;
  border-radius:50%;
  background:conic-gradient(#9ad54d 0deg, #9ad54d 0deg, rgba(255,255,255,.14) 0deg);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: inset 0 0 0 18px rgba(4,12,34,.88);
}
.content{display:flex; flex-direction:column; gap:14px}

.kpis{
  display:grid;
  grid-template-columns: 1.2fr 1fr 1fr 1fr 1fr;
  gap:12px;
}
.kpi{
  background:linear-gradient(180deg, rgba(4,12,34,.86), rgba(3,10,28,.86));
  border:1px solid rgba(255,255,255,.09);
  border-radius:16px;
  padding: 12px 24px;
  box-shadow:0 16px 36px rgba(0,0,0,.2);
}
.kpi-label{font-size:10px; color:rgba(255,255,255,.78); margin-bottom:6px}
.kpi-value{font-size:26px; font-weight:900; letter-spacing:0.5px}
.kpi-stars{font-size:26px; color:var(--accent); letter-spacing:2px}

.grid{
  margin-top:24px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
.panel{
  background:linear-gradient(180deg, rgba(4,12,34,.86), rgba(3,10,28,.86));
  border:1px solid rgba(255,255,255,.09);
  border-radius:28px;
  padding: 12px 24px;
  box-shadow:0 18px 40px rgba(0,0,0,.22);
  display:flex;
  flex-direction:column;
}

.panel.span-2{grid-column:1 / span 1}
.panel-title{font-size:12px; color:rgba(255,255,255,.78); margin:2px 0 8px}

/* Personal Bests (Fish Insights) */
.bests-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(320px, 1fr));
  gap:16px;
  width:100%;
  margin:0 auto;
  justify-content:center;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  padding-bottom: 8px;
}
.best-tile{
  justify-content:center;
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  padding:10px 12px;
  background:rgba(255,255,255,.04);
  display:flex;
  flex-direction:column;
  gap:6px;
  min-height: 96px;
}
.best-top{display:flex; justify-content:space-between; align-items:baseline; gap:10px;}
.best-rarity{font-size:12px; letter-spacing:.6px; text-transform:uppercase; color:rgba(255,255,255,.82)}
.best-points{font-size:20px; font-weight:800; color:var(--accent)}
.best-fish{font-size:13px; color:rgba(255,255,255,.92)}
.best-meta{display:flex; flex-wrap:wrap; gap:10px; font-size:12px; color:rgba(255,255,255,.78)}
.best-meta .pill{padding:2px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.03)}

@media (max-width: 540px){
  .bests-grid{ grid-template-columns: 1fr; }
}

canvas{width:100% !important; height:300px !important;}
.panel canvas{height:300px !important}
.table-wrap{
  background:linear-gradient(180deg, rgba(4,12,34,.86), rgba(3,10,28,.86));
  border:1px solid rgba(255,255,255,.09);
  border-radius:22px;
  /* Keep rounded corners but allow the inner horizontal scrollbar to be usable on mobile */
  overflow: hidden;
  box-shadow:0 18px 40px rgba(0,0,0,.22);
}

/* allow inner scroller to show on iOS */
.table-wrap .table-scroll{ border-radius:0 0 22px 22px; }
.table-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  padding: 12px 24px;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.table-title{font-size:14px; letter-spacing:1px; text-transform:uppercase; color:rgba(255,255,255,.9)}
.location-select{font-size:12px; color:rgba(255,255,255,.78); display:flex; gap:10px; align-items:center; flex-wrap:wrap}
select{
  background:rgba(255,255,255,.08);
  color:var(--ink);
  border:1px solid rgba(255,255,255,.16);
  padding: 12px 24px;
  border-radius:10px;
}
.total-fish{font-size:12px; color:rgba(255,255,255,.82)}
.total-fish strong{color:var(--accent)}

.table-scroll{
  max-height:380px;
  overflow:auto;
  width:100%;
  max-width:100%;
  padding-bottom: 8px; /* room for scrollbar */
  -webkit-overflow-scrolling: touch;
  touch-action: pan-x pan-y;
}
/* Let the table size to its content so we don't create empty space after the last column */
.table-scroll table{
  display: inline-table;
  width: max-content;
  min-width: 100%;
  border-collapse:collapse;
  font-size:13px;
}
table{border-collapse:collapse; font-size:13px}
thead th{
  position:sticky;
  top:0;
  background:rgba(5,16,44,.98);
  color:rgba(255,255,255,.9);
  padding: 12px 24px;
  text-align:left;
  border-bottom:1px solid rgba(255,255,255,.12);
}
tbody td{padding: 12px 24px; border-bottom:1px solid rgba(255,255,255,.06)}
tbody tr:hover{background:rgba(255,255,255,.05)}

.fish-name{cursor:help; border-bottom:1px dotted rgba(255,255,255,.35)}

/* Highlight fish name while entering a record */
tbody tr.editing .fish-name{
  border-bottom-color: transparent;
  background: rgba(255,255,255,.10);
  padding: 2px 8px;
  border-radius: 999px;
  box-shadow: 0 0 0 2px rgba(255,196,0,.16);
}

.input-cell{min-width:160px}
input{
  width:120px;
  padding: 12px 24px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.16);
  background:rgba(255,255,255,.08);
  color:var(--ink);
}
input:focus{outline:none; border-color:rgba(255,196,0,.55); box-shadow:0 0 0 3px rgba(255,196,0,.12)}
input.outofrange{border-color:rgba(255,90,90,.75)}

.inline-error{
  display:none;
  font-size:11px;
  color:#ffd1d1;
  margin-top:4px;
}
.inline-error.show{display:block}

tbody tr.common .category-cell{color:var(--common)}
tbody tr.rare .category-cell{color:var(--rare)}
tbody tr.epic .category-cell{color:var(--epic)}
tbody tr.legendary .category-cell{color:var(--legendary)}

@media (max-width: 100%){
  .layout{grid-template-columns:1fr}
  .sidebar{order:2}
  .kpis{grid-template-columns:1fr 1fr}
  .grid{grid-template-columns: 1fr 1fr;
  width:auto;
  filter:drop-shadow(0 6px 10px rgba(0,0,0,.35));
  /* keep logo pinned right while allowing a thinner header bar */
  position:absolute;
  right:22px;
  top:50%;
  transform:translateY(-50%);
}
@media (max-width: 100%){
  .topbar-inner{ padding: 12px 24px; 
  min-height: 64px;}
  .brand-logo{ height:128px; right:16px; }
}

to{transform:translateY(-120px)}}
@keyframes puff{
0%{transform:translate(0,0);opacity:0;}
20%{opacity:1;}
100%{transform:translate(60px,-40px);opacity:0;}
}


15%{opacity:1;}
  60%{opacity:0.85;}
  100%{transform:translate(28px,-26px) scale(1.15); opacity:0;}
}


/* Mobile scaling + full-width header banner */
html, body { width: 100%; overflow-x: hidden; }

.topbar{
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}

.topbar-inner{
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;
  padding-left: 16px;
  padding-right: 16px;
}

/* Make layout adapt on small screens */
@media (max-width: 820px){
  .grid{ grid-template-columns: 1fr !important; }
  .kpis{ grid-template-columns: 1fr 1fr !important; }
  .top-tabs{ flex-wrap: wrap; gap: 8px; }
  .tab-btn{ flex: 1 1 auto; }
  .brand-title{ font-size: 34px; }
  .brand-logo{ transform: none !important; max-width: 120px; height: auto; }
}

@media (max-width: 520px){
  .kpis{ grid-template-columns: 1fr !important; }
  .content{ padding-left: 12px; padding-right: 12px; }
  .panel{ padding: 12px 14px; }
}

/* Center header brand */
.topbar-inner{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:24px;
}
.brand{
  text-align:center;
}


/* Responsive overhaul */
*{ box-sizing:border-box; }
img{ max-width:100%; height:auto; }

:root{
  --page-max: 1100px;
}

html, body{ width:100%; overflow-x:hidden; }

/* Main content fluid */
.content{
  width: 100%;
  max-width: var(--page-max);
  margin: 0 auto;
  padding-left: 16px;
  padding-right: 16px;
}

/* Panels & charts */
.panel{ min-width: 0; }
.panel canvas{
  width:100% !important;
  height:260px !important;
}

/* Tabs wrap */
.top-tabs{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
}
.tab-btn{
  flex: 1 1 auto;
  min-width: 140px;
}

/* Header: stacked centered on mobile */
.topbar{
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}
.topbar-inner{
  max-width: var(--page-max);
  margin: 0 auto;
  padding: 10px 16px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:12px;
}
.brand{ text-align:center; }
.brand-logo{
  transform: none !important;
  max-width: 160px;
}

/* Break grids earlier */
@media (max-width: 900px){
  .kpis{ grid-template-columns: 1fr 1fr !important; }
  .grid{ grid-template-columns: 1fr !important; }
  .panel.span-2{ grid-column: auto !important; }
  /* Records table: ensure the inner scroller is usable on mobile widths */
  .table-scroll{ overflow-x:auto !important; -webkit-overflow-scrolling:touch; }
  thead th, tbody td{ padding-left: 14px !important; padding-right: 14px !important; }

}

@media (max-width: 520px){
  .kpis{ grid-template-columns: 1fr !important; }
  .tab-btn{ min-width: 120px; padding: 10px 12px; }
  .brand-title{ font-size: 32px; letter-spacing: 1.5px; }
  .brand-sub{ font-size: 10px; }
  .panel canvas{ height: 240px !important; }
  /* Keep inner table scroll usable */
}

@media (max-width: 740px) and (orientation: landscape){
  .panel canvas{ height: 220px !important; }
}


/* Mobile: collapse left panel and stack charts */
@media (max-width: 900px) {
  .dashboard-grid,
  .grid {
    grid-template-columns: 1fr !important;
  }

  .left-panel,
  .kpis,
  .panel.kpi-panel {
    height: auto !important;
    max-height: none !important;
  }

  .panel,
  .panel.span-2 {
    grid-column: auto !important;
    width: 100%;
  }

  .kpis {
    gap: 10px;
  }

  .panel canvas {
    height: 240px !important;
  }
}


/* Mobile: stack sidebar above content (fix "left panel" on phones) */
@media (max-width: 900px){
  .layout{
    grid-template-columns: 1fr !important;
    padding: 12px 12px !important;
  }
  .sidebar{
    padding: 12px 14px !important;
  }
  /* Make location buttons wrap nicely instead of making the sidebar tall */
  .btn-list{
    display:flex !important;
    flex-wrap:wrap !important;
    gap:8px !important;
  }
  .btn-list .loc-btn{
    flex: 0 0 auto;
  }
}

/* Extra small phones */
@media (max-width: 520px){
  .sidebar-section{ margin-bottom: 12px; }
  .sidebar-title{ margin-bottom: 8px; }
}


/* Hide sidebar on Records + Instructions tabs */
body.no-sidebar .layout{
  grid-template-columns: 1fr !important;
}
body.no-sidebar .sidebar{
  display:none !important;
}

/* (Records table scrolling is handled by the main .table-scroll rules above.) */



/* --- Header brand/logo alignment (v8 logo update) --- */
.topbar-inner{
  display:flex;
  justify-content:center; /* center the group within header */
  align-items:center;
  width:100%;
}

.brand-group{
  display:flex;
  align-items:center;
  gap:14px; /* space between text and logo */
  text-align:left;
}

/* Keep text block compact so the group centers nicely */
.brand{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  line-height:1;
}

/* New logo sizing: adjust as needed, but keep responsive */
.brand-logo{
  height:40px;
  width:auto;
  display:block;
}

/* On small screens, scale logo down a bit */
@media (max-width: 480px){
  .brand-logo{ height:31px; }
  .brand-group{ gap:10px; }
}


/* --- Responsive Records table (stacked rows on mobile) --- */
@media (max-width: 640px){
  #recordsView .table-scroll{
    overflow: visible;
    max-height: none;
    padding-bottom: 0;
  }
  #recordsView .table-scroll table{
    width: 100%;
    min-width: 0;
    display: block;
  }
  #recordsView .table-scroll thead{ display:none; }
  #recordsView .table-scroll tbody{ display:block; }
  #recordsView .table-scroll tr{
    display:block;
    margin: 10px 0;
    border:1px solid rgba(255,255,255,.10);
    border-radius: 16px;
    overflow: hidden;
    background: rgba(0,0,0,.10);
  }
  #recordsView .table-scroll td{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    width:100%;
    padding: 12px 14px;
    border: none;
    border-top:1px solid rgba(255,255,255,.08);
  }
  #recordsView .table-scroll td:first-child{ border-top:none; }
  #recordsView .table-scroll td::before{
    content: attr(data-label);
    font-weight: 700;
    color: rgba(255,255,255,.78);
    flex: 0 0 auto;
    max-width: 48%;
  }
  #recordsView .table-scroll td.input-cell{
    align-items:flex-start;
  }
  #recordsView .table-scroll td.input-cell input{
    width: 100%;
    max-width: 160px;
  }
  #recordsView .table-scroll .inline-error{
    margin-top: 6px;
  }
}


/* --- Records responsive sizing fix (prevent off-screen width) --- */
@media (max-width: 640px){
  #recordsView, #recordsView *{ box-sizing: border-box; }
  #recordsView .table-wrap{ width:100%; max-width:100%; }
  #recordsView .table-scroll{ width:100%; max-width:100%; overflow:hidden !important; }
  #recordsView .table-scroll table{
    display:block !important;
    width:100% !important;
    max-width:100% !important;
    min-width:0 !important;
  }
  #recordsView .table-scroll tr{
    width:100%;
    max-width:100%;
  }
  #recordsView .table-scroll td{
    width:100%;
    max-width:100%;
    overflow-wrap:anywhere;
  }
  #recordsView .table-scroll .fish-name{ display:inline-block; max-width:100%; }
  #recordsView .table-scroll td::before{ max-width: 52%; }
}


/* --- Records mobile overflow + header wrap fix --- */
@media (max-width: 640px){
  /* Allow the Records view itself to scroll if anything still overflows */
  #recordsView{
    width: 100%;
    max-width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Prevent padding from making the card exceed viewport */
  #recordsView .table-wrap{
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  /* Stack the Records header controls to avoid horizontal overflow */
  #recordsView .table-head{
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  #recordsView .location-select{
    display:flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
    width: 100%;
    max-width: 100%;
  }
  #recordsView .location-select select{
    width: 100%;
    max-width: 100%;
  }
  #recordsView .total-fish{
    display:block;
    width: 100%;
    max-width: 100%;
    white-space: normal;
  }
}


/* --- Mobile header scale tweak --- */
@media (max-width: 640px){
  .brand-title{ font-size: 0.85em; }
  .brand-sub{ font-size: 0.8em; }
  .brand-logo{ height: 32px; }
}


/* --- Mobile header proportional scaling --- */
@media (max-width: 640px){
  .brand-group{
    transform: scale(0.85);
    transform-origin: center;
  }
}


/* --- Header layout hard override (fix mobile/logo separation) --- */
.topbar-inner{
  display:flex !important;
  justify-content:center !important;
  align-items:center !important;
  gap:0 !important;
}

.brand-group{
  display:flex !important;
  align-items:center !important;
  justify-content:center !important;
  gap:12px !important;
}

.brand-logo{
  position:static !important;
  right:auto !important;
  top:auto !important;
  margin:0 !important;
  transform:none !important;
}

/* Proportional downscale on mobile without changing title/sub ratios */
@media (max-width: 640px){
  .brand-title{ font-size:32px !important; letter-spacing:1.5px !important; }
  .brand-sub{ font-size:11px !important; letter-spacing:1.2px !important; }
  .brand-logo{ height:31px !important; width:auto !important; }
  .brand-group{
    transform: scale(0.85) !important;
    transform-origin: center !important;
  }
}


.app-footer{position:fixed; bottom:0; left:0; width:100%; display:flex; justify-content:center; padding:10px 0; background:rgba(0,0,0,.35); backdrop-filter: blur(6px); z-index:10;}
.contact-btn{
  background:#ff4d4d;
  color:#fff;
  padding:6px 18px;
  border-radius:20px;
  font-weight:700;
  text-decoration:none;
}
.contact-btn:hover{ opacity:.85; }

/* Contact button thinner */
.contact-btn{ font-size:12px; border-radius:16px; }

/* More space below header for Records + Instructions */
#recordsView{ margin-top: 14px; }
#instructionsView{ margin-top: 14px; }
@media (max-width: 640px){
  #recordsView{ margin-top: 18px; }
  #instructionsView{ margin-top: 18px; }
}

/* Snapshot spacing: push KPI cards and left panel down */
#dashboardView .kpi-grid{ margin-top: 16px; }
#dashboardView .left-panel{ margin-top: 16px; }
@media (max-width: 640px){
  #dashboardView .kpi-grid{ margin-top: 20px; }
  #dashboardView .left-panel{ margin-top: 20px; }
}

/* Uniform spacing below header for all views */
.tab-view{
  margin-top: 16px;
}
@media (max-width: 640px){
  .tab-view{
    margin-top: 20px;
  }
}

/* Snapshot alignment */
#dashboardView .left-panel{ margin-top: 0 !important; }
#dashboardView .kpi-grid{ margin-top: 0 !important; }
#dashboardView .grid{ margin-top: 8px; }

/* Match Analytics spacing to Instructions */
#fishView, #mapView{
  margin-top: 16px !important;
}

/* Force Snapshot left panel and KPI grid to align at top */
#dashboardView .kpi-grid,
#dashboardView .left-panel{
  margin-top: 0 !important;
  align-self: flex-start !important;
}
/* Nudge charts grid up slightly */
#dashboardView .grid{
  margin-top: 6px !important;
}

/* Snapshot: align sidebar top with KPI row (same gap below header/tabs) */
body:not(.no-sidebar) .sidebar{
  margin-top: 16px;
}
@media (max-width: 640px){
  body:not(.no-sidebar) .sidebar{
    margin-top: 20px;
  }
}

/* Snapshot: nudge the 4 charts down slightly */
#dashboardView .grid{
  margin-top: 12px !important;
}
@media (max-width: 640px){
  #dashboardView .grid{
    margin-top: 16px !important;
  }
}

/* Analytics: nudge charts up to match other tabs */
#fishView .grid, #mapView .grid{
  margin-top: 0 !important;
}
@media (max-width: 640px){
  #fishView .grid, #mapView .grid{
    margin-top: 4px !important;
  }
}

/* Ensure footer sits after content, not floating */
.app-footer{position:fixed; bottom:0; left:0; width:100%; display:flex; justify-content:center; padding:10px 0; background:rgba(0,0,0,.35); backdrop-filter: blur(6px); z-index:10;}

body{ padding-bottom: 70px; }

/* Snapshot: nudge all containers to the right */
#dashboardView .shell{
  padding-left: 12px;
}
@media (max-width: 640px){
  #dashboardView .shell{
    padding-left: 6px;
  }
}

/* Instructions: center left panel under heading */
#instructionsView .sidebar{
  margin-left: auto;
  margin-right: auto;
}

#mapView .panel-title { margin-bottom: 26px; }

#scoreRangesLocation{ text-align:center; margin: 2px 0 18px; font-size:13px; color: rgba(255,255,255,.85); }
/* Weight unit toggle */
.unit-toggle-row{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  margin: 6px 0 14px 0;
}
.unit-toggle-label{
  color: rgba(255,255,255,.75);
  font-size: 14px;
  letter-spacing: .4px;
}
.unit-toggle{
  display:flex;
  gap:8px;
  padding:6px;
  border-radius: 999px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
}
.unit-btn{
  border:none;
  cursor:pointer;
  padding:8px 14px;
  border-radius: 999px;
  background: transparent;
  color: rgba(255,255,255,.75);
  font-weight: 700;
  letter-spacing: .6px;
  text-transform: lowercase;
}
.unit-btn.active{
  background: rgba(255,255,255,.12);
  color: rgba(255,255,255,.92);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12);
}
.unit-btn:focus{ outline: 2px solid rgba(255,255,255,.18); outline-offset: 2px; }


/* Stable width for Stars column (prevents table shifting as stars appear) */
td.stars, th.stars {
  width: 8ch;
  min-width: 8ch;
  text-align: center;
  white-space: nowrap;
}
td.stars {
  font-variant-ligatures: none;
}


/* Share button in header */
.topbar-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
}
.header-share{
  flex: 0 0 auto;
  margin-left: auto;
}
.share-btn{
  cursor:pointer;
  padding:10px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color: rgba(255,255,255,.92);
  font-weight: 800;
  letter-spacing: .4px;
}
.share-btn:hover{ background: rgba(255,255,255,.12); }

/* Header share icon button */
.header-share{
  padding:8px;
  width:36px;
  height:36px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius: 999px;
}
.header-share svg{
  display:block;
}

/* Inline title + share icon */
.dashboard-title-row{
  display:flex;
  align-items:center;
  gap:10px;
}
.dashboard-title{
  font-size:22px;
  font-weight:800;
  color: rgba(255,255,255,.92);
}

/* Share icon inline with brand title */
.brand-title-row{
  display:inline-flex;
  align-items:center;
  gap:10px;
}
.header-share-inline{
  padding:8px;
  width:34px;
  height:34px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color: rgba(255,255,255,.92);
}
.header-share-inline:hover{ background: rgba(255,255,255,.12); }

/* Ensure header content stays centered */
.topbar-inner{
  justify-content:center;
}

/* Share icon positioned after logo */
.header-share-inline{
  margin-left: 10px;
}

/* Stars content should not change cell display */
td.stars { white-space: nowrap; }

/* Records table: keep Stars column stable (1–5 stars) */
table.records-table{
  table-layout: fixed;
}
table.records-table th.stars,
table.records-table td.stars{
  width: 9ch;
  min-width: 9ch;
  max-width: 9ch;
  text-align: center;
  white-space: nowrap;
}

/* Header pulldown menu (top-right corner) */
header{ position: relative; }
.header-menu-wrap{
  position: absolute;
  right: 12px;
  top: 10px;
  z-index: 50;
}
.menu-btn{
  cursor:pointer;
  width:36px;
  height:36px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color: rgba(255,255,255,.92);
  display:flex;
  align-items:center;
  justify-content:center;
}
.menu-btn:hover{ background: rgba(255,255,255,.12); }
.menu-dropdown{
  margin-top: 8px;
  min-width: 160px;
  padding: 8px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(10,16,28,.96);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  display:none;
}
.menu-dropdown.open{ display:block; }
.menu-item{
  width:100%;
  cursor:pointer;
  border:none;
  background: transparent;
  color: rgba(255,255,255,.92);
  padding: 10px 10px;
  border-radius: 10px;
  display:flex;
  align-items:center;
  gap:10px;
  font-weight: 750;
}
.menu-item:hover{ background: rgba(255,255,255,.08); }
.mi-icon{ display:inline-flex; }

/* Sharecards dropdown: text list + section header */
.menu-dropdown.share-dropdown{
  min-width: 220px;
  padding: 8px;
}
.menu-dropdown.share-dropdown .menu-item{
  justify-content: flex-start;
  padding: 10px 10px;
  font-weight: 750;
}
.menu-dropdown.share-dropdown .menu-section{
  padding: 6px 10px 4px 10px;
  font-size: 12px;
  font-weight: 800;
  letter-spacing: .10em;
  text-transform: uppercase;
  color: rgba(255,255,255,.55);
}
.menu-dropdown.share-dropdown .menu-divider{
  height: 1px;
  background: rgba(255,255,255,.10);
  margin: 6px 6px;
  border-radius: 1px;
}

@media (max-width: 768px){
  .header-menu-wrap{ right: 10px; top: 8px; }
}

/* Prevent layout shift when dropdown opens */
html{ overflow-y: scroll; }

/* Menu: icon-only item compact */
.menu-dropdown{
  min-width: 56px;
  padding: 6px;
}
.menu-item{
  justify-content:center;
  padding: 10px;
}
.menu-item .mi-icon{
  margin: 0;
}

/* Mobile: move menu further right/top so it doesn't overlap logo */
@media (max-width: 768px){
  .header-menu-wrap{
    right: 6px;
    top: 6px;
  }
  .menu-btn{
    width: 34px;
    height: 34px;
  }
}

/* Prevent menu jump by fixing wrapper size */
.header-menu-wrap{
  width: 36px;
  height: 36px;
}
.menu-dropdown{
  position: absolute;
  right: 0;
  top: 42px;
}

/* Stronger mobile positioning */
@media (max-width: 768px){
  .header-menu-wrap{
    right: 2px;
    top: 2px;
  }
  .menu-dropdown{
    top: 40px;
  }
}

/* Records table: lock Stars column width (1–5 stars) */
#recordsView table{
  table-layout: fixed;
}
#recordsView th:nth-child(5),
#recordsView td:nth-child(5){
  width: 9ch;
  min-width: 9ch;
  max-width: 9ch;
  text-align: center;
  white-space: nowrap;
}

/* Records table: widen table and give Stars column generous fixed space */
#recordsView .records-card{
  max-width: 1400px; /* slightly wider container */
}

#recordsView table{
  table-layout: fixed;
  width: 100%;
}

#recordsView th:nth-child(5),
#recordsView td:nth-child(5){
  width: 140px;      /* hard pixel width for stars */
  min-width: 140px;
  max-width: 140px;
  text-align: center;
  white-space: nowrap;
}


/* True vertical centering for Personal Bests panel */
@media (min-width: 900px) {
  .personal-bests-panel {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
}


/* Vertically center Personal Bests grouping within its panel (desktop only) */
@media (min-width: 900px) {
  .personal-bests-panel{
    display:flex;
    flex-direction:column;
  }
  .personal-bests-panel .bests-grid{
    margin-top:auto;
    margin-bottom:auto;
  }
}


/* Instructions text styling to match other tabs */
.instructions-text {
  line-height: 1.6;
}
.instructions-text p {
  font-size: 15px;
  color: rgba(255,255,255,.85);
}

/* Data & Backups (Instructions tab) */
.backup-actions{
  margin-top: 10px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.backup-btn{
  align-self:flex-start;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.08);
  color: rgba(255,255,255,.92);
  padding: 10px 14px;
  font-size: 13px;
  font-weight: 800;
  cursor: pointer;
}
.backup-btn:hover{ background: rgba(255,255,255,.12); }
.backup-btn:focus{ outline: 2px solid rgba(255,255,255,.18); outline-offset: 2px; }

.restore-wrap{ display:flex; flex-direction:column; gap:8px; }
.restore-label{ font-size: 12px; color: rgba(255,255,255,.78); letter-spacing: 1px; text-transform: uppercase; }

.restore-drop{
  border: 1px dashed rgba(255,255,255,.24);
  background: rgba(255,255,255,.05);
  border-radius: 14px;
  padding: 14px;
  font-size: 13px;
  color: rgba(255,255,255,.82);
  cursor: pointer;
  user-select:none;
}
.restore-drop:hover{ background: rgba(255,255,255,.07); }
.restore-drop.dragover{
  border-color: rgba(255,196,0,.55);
  background: rgba(255,196,0,.10);
}

.backup-msg{
  min-height: 18px;
  font-size: 13px;
  color: rgba(255,255,255,.80);
}


.muted{ color: var(--muted); font-size: 16px; }


/* === Share card: stabilize highest scoring fish list === */
.share-card .rarity-entry {
  margin-bottom: 14px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.share-card .rarity-entry .left {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.share-card .rarity-entry .fish-name {
  font-size: 1.05rem;
  line-height: 1.25;
  font-weight: 600;
}

.share-card .rarity-entry .fish-meta {
  margin-top: 4px;
  font-size: 0.8rem;
  line-height: 1.2;
  opacity: 0.8;
}

.share-card .rarity-entry .fish-points {
  font-size: 0.95rem;
  font-weight: 600;
  white-space: nowrap;
}


/* === Share Card layout rebalance === */

/* Shrink KPI cards slightly */
.share-card .kpi-grid {
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.share-card .kpi {
  padding: 14px 16px;
}

.share-card .kpi .label {
  font-size: 0.85rem;
}

.share-card .kpi .value {
  font-size: 1.6rem;
  line-height: 1.1;
}

/* Give more vertical room to highest scoring fish section */
.share-card .highest-by-rarity {
  margin-top: 18px;
  padding-top: 6px;
}

/* Ensure rarity list can grow */
.share-card .highest-by-rarity .rarity-entry {
  margin-bottom: 18px;
}

/* Slightly smaller points text to avoid collisions */
.share-card .highest-by-rarity .fish-points {
  font-size: 0.9rem;
}

/* Acknowledgements text styling */
.ack-text {
  font-weight: 400;
  font-size: 0.9rem;
  line-height: 1.45;
}
.ack-logo {
  height: 16px;
  width: auto;
  vertical-align: middle;
  margin-right: 4px;
}

/* Acknowledgements spacing & tone */
.instr-divider{
  border: none;
  border-top: 1px solid rgba(255,255,255,0.14);
  margin: 18px 0 10px;
}
.ack-heading{
  color: #9aa0a6;
  font-weight: 700;
}

.ack-wrapper {
  margin-top: 20px;
}
.instr-text{
  color: var(--text);
}
.ack-text {
  color: #9aa0a6; /* slightly dimmed gray */
}

/* Donut center label (fixed) */
.donut { position: relative; }
.donut canvas { position: relative; z-index: 1; }
.donut-value{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  font-size: 14px;
  font-weight: 800;
  color: #6b7280;
  background: transparent;
  padding: 0;
  border-radius: 0;
  line-height: 1;
  pointer-events: none;
}


/* === Golden_v12e: Visual-only fish highlight, FORCE single-line, brighter yellow === */
.fish-name,
.is-editing .fish-name {
  display: inline-flex !important;   /* overrides flex/text wrapping sources */
  flex-wrap: nowrap !important;
  align-items: center;
  max-width: 100%;
  white-space: nowrap !important;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fish-name.is-editing,
.is-editing .fish-name {
  background: rgba(255, 240, 90, 0.45); /* much brighter yellow fill */
  box-shadow:
    0 0 0 3px rgba(255, 240, 90, 1),
    0 0 18px rgba(255, 240, 90, 0.95);
  border-radius: 8px;
}
/* === End Golden_v12e === */


/* === Golden_v12f: EXTRA-bright yellow highlight (visual-only) === */
.fish-name.is-editing,
.is-editing .fish-name {
  background: rgba(255, 255, 120, 0.65); /* very bright yellow */
  box-shadow:
    0 0 0 3px rgba(255, 230, 0, 1),
    0 0 22px rgba(255, 230, 0, 1);
}
/* === End Golden_v12f === */


/* === Golden_v12g: Allow wrap when idle, single-line only when selected === */

/* Default (NOT selected): allow wrapping */
.fish-name {
  display: inline;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
}

/* Selected / editing: force single line */
.fish-name.is-editing,
.is-editing .fish-name {
  display: inline-flex;
  flex-wrap: nowrap;
  white-space: nowrap !important;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* === End Golden_v12g === */


/* === Golden_v12h: Slightly widen Log Records table container === */
/* Desktop only – mobile remains viewport-bound */
@media (min-width: 1200px) {
  .log-records-container,
  .records-container,
  .log-records,
  .records-table-wrapper {
    max-width: 1280px;
  }
}
/* === End Golden_v12h === */


/* Remove number input spinners */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}


/* Highlight referenced tab names in instructions */


/* Highlight referenced tab names in instructions (muted) */
.tab-ref{
  color: rgba(255, 216, 77, 0.75);
  font-weight: 600;
}



/* Carp Diem discord link in acknowledgements */
.ack-discord{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  text-decoration: none;
  color: inherit;
  cursor: pointer;
}
.ack-discord:hover{
  text-decoration: underline;
}


.version-micro{position:absolute; right:8px; bottom:6px; font-size:8px; color:#ffffff; opacity:.85; pointer-events:none;}


.ack-discord img{vertical-align:middle;}

.ack-discord {
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
}

.ack-discord img {
  vertical-align: middle;
}


/* Privacy Notice */
.privacy-btn {
  background: none;
  border: 1px solid rgba(255,255,255,0.4);
  color: #fff;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85em;
}

.privacy-modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.privacy-content {
  background: #0b1e2d;
  color: #fff;
  padding: 20px;
  max-width: 420px;
  width: 90%;
  border-radius: 12px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.4);
}

.privacy-footnote {
  font-size: 0.75em;
  opacity: 0.7;
  margin-top: 12px;
}

.close-btn {
  background: none;
  border: none;
  color: #ccc;
  margin-top: 10px;
  cursor: pointer;
}


/* Dashboard: Include Legendary toggle */
.dash-controls{
  display:flex;
  justify-content:flex-end;
  margin: 6px 0 10px 0;
}
.toggle{ display:flex; align-items:center; gap:10px; cursor:pointer; user-select:none; }
.toggle input{ display:none; }
.toggle .slider{
  width:42px; height:22px; border-radius:22px;
  background: rgba(255,255,255,0.22);
  position: relative;
}
.toggle .slider:before{
  content:""; position:absolute; top:3px; left:3px;
  width:16px; height:16px; border-radius:50%;
  background:#fff; transition: all 0.2s ease;
}
.toggle input:checked + .slider:before{ transform: translateX(20px); }
.toggle-label{ font-size:0.9em; opacity:0.9; }


/* Muted divider above Privacy Notice */
.privacy-divider {
  border: none;
  height: 1px;
  background: rgba(255,255,255,0.18);
  margin: 16px 0 10px 0;
}
